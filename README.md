# A-Fine-Windy-Day-Hackerearth

PROBLEM STATEMENT

The problem statement was to predict the power generated by windmills. The data consisted of different features that can be used to predict the power generated. The task was to build a model that can predict the power generated given a set of features.

EVALUATION METRIC USED TO TEST PERFORMANCE OF THE MODEL

The evaluation metric used to test the performance of the model was 
Score = max(0, 100*metrics.r2_score(actual, predicted))

DATA EXPLORATION

The training dataset consists of 28200 rows and 22 columns, 21 of the which are the features and 1 is the target column namely, ‘windmill_generated_power(kW/h)’, to predict which, the model has to be built.

On initial analysis of the training data, it was observed that all columns apart from tracking_id, datetime, area_temperature(°C) and blade_breadth(m) have missing values. The most surprising part was that even the target variable i.e. ‘windmill_generated_power(kW/h)’ had 207 missing values. On further analysis of the training data, it was observed that there are values of -99, -999, 999 and -30 which appeared like missing values. Hence, these were also treated as missing values while reading the dataset for analysis and model building.

FEATURE ENGINEERING

As it was noticed that datetime might play a pivotal role in feature generation, the following features were extracted from the datetime column
•	Month of the year
•	Week of the year
•	Day of the month
•	Weekday
•	Hour of the day
•	Day of the year

The biggest advantage of the datetime column was that there were no missing values. Other columns could also be used to generate features but due to the presence of missing values, proper features could not be generated.


MODEL BUILDING

As it was observed that there are outliers in the data, data points lying outside of 6 standard deviations were treated as outliers and removed while building the model. The rows/instances where the target variable was missing in the training dataset was also removed as imputing them would probably reduce the efficacy of the model. A 10 fold cross validation was done to avoid overfitting the models and obtain reliable local scores. An ensemble of 10 catboost models was built using the 19 initial columns(dropped tracking_id and datetime columns) and 6 datetime features generated. A weighted output of the 20 models was taken for submission based on the eval scores of the models. The local CV was 96.96965. On submission, the private leaderboard score was 97.26546. 

FURTHER FEATURE ENGINEERING BY AGGREGATIONS

The hypothesis was that aggregating the numerical features against the categorical features would definitely give better features and yield better scores as the power generated depends on the environment over a period of time and not just that particular instant. Therefore, the features generated using datetime were also considered as categorial and aggregations namely, count, mean, median, minimum, maximum, standard deviation and skew. Aggregations were also done at Hour of the day and Day of the Year level. This resulted in a total of 1096 features.

MODEL BUILDING WITH NEW FEATURES

Now with a total of 1096 features, the model building process was repeated i.e. a 20 fold validation resulting in 20 catboost models and later ensembling the 20 predictions in a weighted mean fashion based on the local CV. The local CV was 97.62537 and on submission the private leaderboard score was 98.02289.
